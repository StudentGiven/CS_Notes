# 计算机网络(一)：概论

## 局域网

私有的，局域网中每台主机都具有一个标识地址来定义自身，而互相发送的数据包都需要携带源主机和目的主机的标识地址。

在过去，所有主机都连在一条公共电缆，需要接收的机器保存线上的包，不需要的则丢弃。而现在多数局域网采用智能连接交换机，可以识别数据包中地址然后引导该报到其目的地址，减轻了局域网中的流量

![局域网](http://qiniu.itliusir.com/%E5%B1%80%E5%9F%9F%E7%BD%911.png)

## 广域网

广域网对比局域网通常覆盖范围会更大，可以覆盖一个城市/一个省/一个国家/甚至真个世界。广域网互联的设备也更多，除了局域网互联的交换机外还包括路由器、调制解调器等，通常由通信公司建设和运营。目前使用的两种典型的广域网如下所示。

### 点到点广域网

通过传输介质(电缆或大气)连接，我们可以租用一个点对点的专用广域网来连接两个局域网，实现局域网之间的互联

![点到点](http://qiniu.itliusir.com/%E5%B9%BF%E5%9F%9F%E7%BD%911.png)

### 交换式广域网

交换式广域网是由交换机连接多个点对点的广域网而形成的

![交换式](http://qiniu.itliusir.com/%E5%B9%BF%E5%9F%9F%E7%BD%912.png)

## 交换式网络

前面我们提到的交换机，可能会有同学会疑惑，交换是什么意思呢？带着这个疑问我们先去了解下什么是交换式网络。

目前常见的交换式网络类型有电路交换网络和分组交换网络。

- **电路交换网络**

  两个系统的交换机之间存在一条专用**高容量**(要保证与另一端**全部设备**通信的成功)电路，通信流量小的时候会造成容量的浪费

- **分组交换网络**

  会使用路由器来**存储和转发**分组交换中的数据队列，可以通过消费**队列**进行削峰填谷提高数据线的利用率。缺点是满负载会遇到一些延迟

## 访问 Internet

### 使用电话网络

大部分地区都提供有电话服务，由于大多数电话网络自身已经连接到Internet，因此可以把语音线路转换成点到点的广域网：

- **通过拨号服务**

  在电话线路中增加将数据转换为语音的调制解调器，由于拨号服务非常慢加上电话和Internet连接不可以同时进行，所以大多数不会被使用

- **DSL服务**

  该服务在拨号的基础上升级了他们的电话线路，允许电话和数据通信同时进行

### 使用有线电视网络

通过有点电视网络连接到Internet可以提供高效率的连接，但是和同一电缆的用户数有关

### 直接连接到Internet

大机构或者大公司自身变成一个本地 ISP 并连入Internet



## 协议分层

协议定义了发送者、接收者、中间设备为了高效通信需要遵循的规则

协议分层允许我们将一个复杂的任务分解成几个较小的、简单的任务。并且可以将服务从实现中分离出来，不用去关心具体转换过程只需要结果能满足即可替换。另一个优势就是中间系统可以复用部分协议层次

> **分层原则：** ① 如果是双向通信，每一层都能够实现两个相反的任务；② 每一层中的两个对象(双方该层通信的数据包)应该相同

### 五层模型

> - **应用层**
>
> 应用层的通信是处于两个进程之间
>
> HTTP SMTP FTP TELNET SSH SNMP DNS IGMP
>
> - **传输层**
>
> 传输层负责向应用层提供服务，从应用层得到消息封装成传输层的数据包然后进行发送，通过逻辑链接到达目的主机的传输层然后把消息发给应用层
>
> TCP UDP
>
> - **网络层**
>
> 主机到主机，路径的路由
>
> IP
>
> - **数据链路层**
>
> 接管要传输的链路，封装至frame
>
> 支持所有标准的和私有的协议
>
> - **物理层**
>
> 负责携带frame中单独的bit穿过链路，通过传输介质(电缆或大气)连接，需要对bit进行转换为电或者光信号

从A到B的通信如下图所示

![A to B](http://qiniu.itliusir.com/%E5%8D%8F%E8%AE%AE%E5%88%86%E5%B1%821.png)

可以看到双方主机都涉及到5个层次，路由器涉及3层，交换机只涉及一个数据链路层和一个物理层。上图的下半部分可以看出路由器从链路1接收分组并将它投递到链路2，这两个链路是同一个协议

在消息传输的时候，经过源主机每一层都需要封装，到达目的主机每一层时候都需要解封装

![pack_unpack](http://qiniu.itliusir.com/pack_unpack.png)



- **4 传输层头部** >> 标识符、Sequece num、Ack num等
- **3 网络层头部** >> 版本号、标识符、TTL、身份、流标签
- **2 数据链路层头部** >> 序言、起始信号、标识符、类型

因每一层地址表示不一样，如应用层的域名、传输层的端口、链路层的mac地址，这里统一使用标识符来标识

